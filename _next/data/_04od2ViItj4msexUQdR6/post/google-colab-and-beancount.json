{"pageProps":{"postData":{"frontmatter":{"title":"Hosting Beancount on Google Colab","description":"Access your Accounting books for free, wherever you are ;)","date":"March 26, 2022","topic":{"id":"automation","name":"Automation","image":"automation.jpg","description":"Spending time to do the same thing over and over again is tedious! Thus, I like to automate as much as possible.","color":"bg-green-300"},"tags":[{"id":"python","name":"python","image":"python-header.png","description":"Python is very handy in investing","color":"bg-green-300","icon":"python.svg"}],"author":{"id":"chris","name":"Chris","image":"https://s.gravatar.com/avatar/db809ecfa64d56da4bd9704c8393005a?s=80","description":"Software Engineer, passionate about ..."},"img":"/static/idea-lamp.png"},"post":{"content":"\nMaybe you are in a similar situation like me, where you have deposit and savings accounts on several banks and investment accounts on several services! Keeping track of all that is painful and, unfortunately, there is no service yet that can connect everything together and properly present an aggregate view as well as a historical return of all the accounts together :(\n\nTo overcome this issue, I use [Beancount](https://github.com/beancount/beancount), an opensource `Double-Entry Accounting from Text Files` tool (python) that comes with several extensions and a nice web interface.\n\nAs always, I like to automate and keep my work in one place (on the cloud). I'm extensively using Google Colab and as a consequence, I had to bring all my accounting there too. :P\n\nBeancount comes with a web server (called [fava](https://github.com/beancount/fava)) and Google Colab gives you a virtual machine running your python code. That means that we can use colab to start the web server, BUT we are not allowed to access it through our public browser, UNLESS we create a tunnel! That is possible with [ngrok](https://ngrok.com/) which `exposes local servers behind NATs and firewalls to the public internet over secure tunnels` :)\n\nHere is the code I'm using...\n\n```python\n%%capture\n!pip install beancount\n!pip install fava\n!pip install pyngrok\n!pip install Jinja2 --upgrade  # Needed by fava. Restart runtime \n\nimport os\nimport logging\nfrom fava.cli import app\nfrom pyngrok import ngrok, conf\nfrom google.colab import drive\n\nNGROK_TOKEN = \"your token here\"\nLOCATION_OF_MAIN_BEANCOUNT_FILE = '/content/drive/My Drive/Colab Notebooks/beancount/base.beancount'\n\n# Mounts the google drive to the virtual machine and gives access to storage\ndrive.mount('/content/drive', force_remount=True)\n\n# disables logs for flask\nlog = logging.getLogger('werkzeug')\nlog.setLevel(logging.ERROR)\n\napp.config.from_mapping(\n    BASE_URL=\"http://localhost:5000\",\n    INCOGNITO=False,  # Set to True if you want to show your balance to someone but not reveal the actual numbers\n    USE_NGROK=os.environ.get(\"USE_NGROK\", \"True\") == \"True\" and os.environ.get(\"WERKZEUG_RUN_MAIN\") != \"true\",\n    BEANCOUNT_FILES=[\n        LOCATION_OF_MAIN_BEANCOUNT_FILE\n    ]\n)\n\nngrok.set_auth_token(NGROK_TOKEN)\nconf.get_default().monitor_thread = False\npublic_url = ngrok.connect(5000, bind_tls=True).public_url\nprint(\" * ngrok tunnel \\\"{}\\\" -> \\\"http://127.0.0.1:{}\\\"\".format(public_url, 5000))\n\napp.config[\"BASE_URL\"] = public_url\napp.run()\n```\n\nSimple, but comes with some more steps:\n\n1. Colab has an older version of Jinja2 preinstalled and when you update to latest one, you have to restart the runtime!\n2. You need an NGROK authentication token (but that is free). Register at [ngrok](https://ngrok.com/). Set the `NGROK_TOKEN` variable in the script when you are done with registering.\n3. You have to have your beancount files uploaded to google drive under `Colab Notebooks`, so they get mounted. Then you set the `LOCATION_OF_MAIN_BEANCOUNT_FILE` variable in the script.\n\nThat's it for now :) Enjoy!\n","excerpt":""},"previousPost":{"slug":"reports-with-pyinvestingsnippets-and-plotly","frontmatter":{"title":"pyinvestingsnippets + plotly = AWESOME","description":"An amazing Dash + Plotly + Pyinvestingsnippets stock/portfolio benchmarking tool.","date":"February 12, 2022","topic":{"id":"automation","name":"Automation","image":"automation.jpg","description":"Spending time to do the same thing over and over again is tedious! Thus, I like to automate as much as possible.","color":"bg-green-300"},"tags":[{"id":"python","name":"python","image":"python-header.png","description":"Python is very handy in investing","color":"bg-green-300","icon":"python.svg"}],"author":{"id":"chris","name":"Chris","image":"https://s.gravatar.com/avatar/db809ecfa64d56da4bd9704c8393005a?s=80","description":"Software Engineer, passionate about ..."},"img":"/static/magic-lamp.png"},"excerpt":"","content":"\nThe last several months I have been extending [pyinvestingsnippets](https://pyinvestingsnippets.readthedocs.io/en/latest/). Some of the changes include:\n\n* Renamed extensions to fit common financial jargon\n* Added support for dataframes\n* Added support for plotly\n* Included fantastic matplotlib and plotly [examples](https://github.com/investingsnippets/pyinvestingsnippets/tree/master/examples)\n\n<!-- [![pyinvestingsnippets + plotly = AWESOME](https://img.youtube.com/vi/IDzR-N9nfDg/0.jpg)](https://youtu.be/IDzR-N9nfDg \"pyinvestingsnippets + plotly = AWESOME\") -->\n\n<p align=\"center\"><iframe width=\"420\" height=\"315\" \nsrc=\"https://www.youtube.com/embed/IDzR-N9nfDg\">\n</iframe></p>\n\n## Run the examples\n\nTo run the examples, clone [`v3.0.0`](https://github.com/investingsnippets/pyinvestingsnippets/tree/v3.0.0) and follow the `README.md` guidelines.\n\nCurrently the examples generate asset prices based on the random walk hypothesis (Brownian Motion)! This is great for a \"look and feel\" of the tool. If you want to try the examples with your own symbols then change the [ASSET_TICKERS & BENCHMARK_TICKERS](https://github.com/investingsnippets/pyinvestingsnippets/blob/v3.0.0/examples/plotly_report_dataframe.py#L25) and replace the [random price generator](https://github.com/investingsnippets/pyinvestingsnippets/blob/v3.0.0/examples/plotly_report_dataframe.py#L87) with the `yahoo` finance price [DataReader](https://github.com/investingsnippets/pyinvestingsnippets/blob/v3.0.0/examples/plotly_report_dataframe.py#L86).  \n\n## Future Plans\n\nThe journey doesn't stop here! I'm planning to extend [pyinvestingsnippets](https://pyinvestingsnippets.readthedocs.io/en/latest/) even more by introducing:\n\n* more portfolio benchmarking metrics\n* support of inflation & risk free rates\n* etc. \n\nWhat would you like so see more? Send me your thoughts...\n"},"nextPost":null},"tags":[{"id":"python","name":"python","image":"python-header.png","description":"Python is very handy in investing","color":"bg-green-300","icon":"python.svg","slug":"python","count":15},{"id":"statistics","name":"statistics","image":"statistics.jpg","description":"Statistics is the discipline that concerns the collection, organization, analysis, interpretation and presentation of data. - Wikipedia","color":"bg-green-300","icon":"statistics.svg","slug":"statistics","count":4},{"id":"cryptos","name":"cryptos","image":"bitcoin.png","description":"The amazing world of Blockchain opens one more chapter in the Investing.","color":"bg-green-300","icon":"bitcoin.svg","slug":"cryptos","count":1}],"sortedTopics":[{"id":"investing","name":"Investing","image":"investing.png","description":"The piggy bank digests a good amount of the savings! There is only one way to get away ... Investing. BUT, there is a hidden enemy, Speculation!","color":"bg-green-300","slug":"investing","count":10},{"id":"automation","name":"Automation","image":"automation.jpg","description":"Spending time to do the same thing over and over again is tedious! Thus, I like to automate as much as possible.","color":"bg-green-300","slug":"automation","count":5},{"id":"mathematics","name":"Mathematics","image":"mathematics.png","description":"Investing, as part of the Science of Finance, is subject to the lows of Mathematics!","color":"bg-green-300","slug":"mathematics","count":4},{"id":"booknotes","name":"Book Notes","image":"booknotes.jpg","description":"Reading books, and keeping notes! I seek to what the books have to tell me.","color":"bg-green-300","slug":"booknotes","count":1}],"allTopics":[{"id":"investing","name":"Investing","image":"investing.png","description":"The piggy bank digests a good amount of the savings! There is only one way to get away ... Investing. BUT, there is a hidden enemy, Speculation!","color":"bg-green-300"},{"id":"mathematics","name":"Mathematics","image":"mathematics.png","description":"Investing, as part of the Science of Finance, is subject to the lows of Mathematics!","color":"bg-green-300"},{"id":"automation","name":"Automation","image":"automation.jpg","description":"Spending time to do the same thing over and over again is tedious! Thus, I like to automate as much as possible.","color":"bg-green-300"},{"id":"booknotes","name":"Book Notes","image":"booknotes.jpg","description":"Reading books, and keeping notes! I seek to what the books have to tell me.","color":"bg-green-300"}],"slug":"google-colab-and-beancount"},"__N_SSG":true}