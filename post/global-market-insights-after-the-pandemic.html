<!DOCTYPE html><html lang="en-US"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-180222243-1"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-180222243-1', {
              page_path: window.location.pathname,
            });
          </script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Global Market Insights after the Pandemic.</title><meta name="description" content="What are the projections after the Pandemic? Let&#x27;s explore ..."/><meta property="og:type" content="website"/><meta name="og:title" property="og:title" content="Global Market Insights after the Pandemic."/><meta name="og:description" property="og:description" content="What are the projections after the Pandemic? Let&#x27;s explore ..."/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Global Market Insights after the Pandemic."/><meta name="twitter:description" content="What are the projections after the Pandemic? Let&#x27;s explore ..."/><meta name="twitter:creator" content="investingsnipts"/><link rel="icon" type="image/png" href="/static/favicon.ico"/><link rel="apple-touch-icon" href="/static/favicon.ico"/><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/f2e447e5ed0492309505.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f2e447e5ed0492309505.css" data-n-g=""/><link rel="preload" href="/_next/static/css/276cb3c5109fbc96253b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/276cb3c5109fbc96253b.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-9b805fa25f3c727dff23.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-eb080e3f091731f228fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1d36bc031662b4dc4c28.js" as="script"/><link rel="preload" href="/_next/static/chunks/bb1c34bc.d6f2610c02ca1f2f8023.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.8953387921da877f7077.js" as="script"/><link rel="preload" href="/_next/static/chunks/c993a675fc23e2c5b16b0cdfa51e09fd2f5f8f80.d32b4384330bdff42c69.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8d389892d8851416e9e3.js" as="script"/><link rel="preload" href="/_next/static/chunks/cb1608f2.374587486deb2a784e19.js" as="script"/><link rel="preload" href="/_next/static/chunks/a9a7754c.d9f31489d713bac24f81.js" as="script"/><link rel="preload" href="/_next/static/chunks/071290cb.0007511c5b3a58747892.js" as="script"/><link rel="preload" href="/_next/static/chunks/28b78d933298d505941537c6c1190f6a19d63af1.41b7ccb1b9a7b85862b6.js" as="script"/><link rel="preload" href="/_next/static/chunks/f485e41bcb118a628b46c21556cf62824a9a6265.1a408615a795a37f5f29.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/post/%5Bslug%5D-9717ed5a4d3fad8e5789.js" as="script"/></head><body><div id="__next"><div class="overflow-hidden items-center justify-center bg-gray-100 max-w-screen-xl mx-auto"><header class="container"><nav class="relative select-none bg-grey lg:flex lg:items-stretch w-full pt-4"><div class="flex flex-no-shrink items-stretch h-12"><a class="flex-no-grow flex-no-shrink relative p-2 leading-normal text-3xl lg:text-5xl no-underline font-semibold flex items-center" href="/">InvestingSnippets</a><button id="hamburgerMenu" type="button" class="block lg:hidden cursor-pointer ml-auto relative w-12 h-12 p-4"><svg id="hamburgerBtn" class="visible fill-current text-gray-700" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg><svg id="hamburgerClose" class="hidden fill-current text-gray-700" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"></path></svg></button></div><div class="lg:flex lg:items-stretch lg:flex-no-shrink lg:flex-grow hidden" id="mobileMenu"><div class="lg:flex lg:items-stretch lg:justify-end ml-auto"><a class="flex-no-grow flex-no-shrink relative py-2 px-4 leading-normal font-semibold text-gray-700 no-underline flex items-center hover:bg-grey-dark" href="/topic/mathematics"><span>Mathematics</span></a><a class="flex-no-grow flex-no-shrink relative py-2 px-4 leading-normal font-semibold text-gray-700 no-underline flex items-center hover:bg-grey-dark" href="/topic/automation"><span>Automation</span></a><a class="flex-no-grow flex-no-shrink relative py-2 px-4 leading-normal font-semibold text-gray-700 no-underline flex items-center hover:bg-grey-dark" href="/topic/investing"><span>Investing</span></a></div></div></nav></header><main class="block lg:flex lg:space-x-2 px-2 lg:p-0 mt-10 mb-10"><div class="w-full lg:w-2/3 px-2"><article><header class="mb-8"><p class="text-sm mb-2"><a class="" href="/">Home</a> &gt; <a class="" href="/topic/investing">Investing</a> &gt; </p><h1 class="mb-2 text-3xl lg:text-4xl leading-none font-display font-semibold">Global Market Insights after the Pandemic.</h1><p class="text-sm mb-2">January 21, 2021<!-- --> <!-- -->by<!-- --> <!-- -->Chris</p><div class="flex justify-end mt-2 mr-5"><a class="text-gray-600" href="/tag/python"><img class="filter-orange-700 h-4 w-4 m-1 inline-block" alt="python" src="https://www.investingsnippets.com/static/python.svg" data-srcset="https://www.investingsnippets.com/static/python.svg"/>python</a></div><div class="flex justify-end mt-2 mr-5"><a target="_blank" rel="noopener noreferrer" href="https://colab.research.google.com/drive/1nPyDupJHidnP5DLfAEKX3eYiY-MHCDmM?usp=sharing"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/></a></div></header><div class="mb-4 prose-lg"><p>2020 was a difficult year and most of the market segments diverged from the projections! With the new facts at hand, and the emerging needs after the pandemic, we should expect changes in the market.</p><p>Below is an attempt to get a feeling of the emerging sectors by analyzing some <a href="https://www.gminsights.com/">Global Market Insights</a> reports.</p><p>And as always, let&#x27;s automate ...</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>!pip install requests beautifulsoup4
</span>import requests
<!-- -->import re
<!-- -->from bs4 import BeautifulSoup
<!-- -->import string
<!-- -->
<!-- -->class GlobalMarketInsights:
<!-- -->  __DEFAULT_BASE_URL = &#x27;https://www.gminsights.com/industry-reports&#x27;
<!-- -->  
<!-- -->  @staticmethod
<!-- -->  def _escape(input):
<!-- -->    printable = string.ascii_letters + string.digits + string.punctuation + &#x27; &#x27;
<!-- -->    return &#x27;&#x27;.join(c if c in printable else &#x27; &#x27; for c in input )
<!-- -->
<!-- -->  def _description_matcher(self, descr):
<!-- -->    descr = GlobalMarketInsights._escape(descr.replace(&#x27;\t&#x27;, &#x27; &#x27;).replace(&#x27;\n&#x27;, &#x27; &#x27;).replace(&#x27;\r&#x27;, &#x27; &#x27;))
<!-- -->
<!-- -->    start_date = end_date = percentage = market_name = None
<!-- -->
<!-- -->    r1 = re.search(&#x27;^(.*) (?:Market|Aftermarket) .*$&#x27;, descr, re.IGNORECASE)
<!-- -->    if r1:
<!-- -->      market_name = r1.group(1).strip()
<!-- -->
<!-- -->    r2 = re.search(&#x27;.* between (\d+) (?:and|to) (\d+)&#x27;, descr)
<!-- -->    if r2:
<!-- -->      start_date = r2.group(1).strip()
<!-- -->      end_date = r2.group(2).strip()
<!-- -->    
<!-- -->    r3 = re.search(&#x27;.* (?:from|of) (\d+) to (\d+)&#x27;, descr)
<!-- -->    if r3:
<!-- -->      start_date = r3.group(1).strip()
<!-- -->      end_date = r3.group(2).strip()
<!-- -->    
<!-- -->    r4 = re.search(&#x27;([-+]?\d*\.\d+|\d+)%&#x27;, descr)
<!-- -->    if r4:
<!-- -->      percentage = r4.group(1)
<!-- -->    
<!-- -->    if None in (market_name, percentage, start_date, end_date):
<!-- -->      raise Exception(f&quot;Couldn&#x27;t parse: {descr}&quot;)
<!-- -->    else:
<!-- -->      return {
<!-- -->        &quot;market&quot;: market_name,
<!-- -->        &quot;percentage&quot; : float(percentage),
<!-- -->        &quot;start&quot;: int(start_date),
<!-- -->        &quot;end&quot;: int(end_date)
<!-- -->      }
<!-- -->
<!-- -->  def get(self, page=1):
<!-- -->    page = requests.get(f&quot;{GlobalMarketInsights.__DEFAULT_BASE_URL}?page={page}&quot;)
<!-- -->    soup = BeautifulSoup(page.text, &#x27;html.parser&#x27;)
<!-- -->    single_rds = soup.find_all(&#x27;div&#x27;, class_=&#x27;single_rd&#x27;)
<!-- -->    reports = []
<!-- -->    for single_rd in single_rds:
<!-- -->      single_rd_children = single_rd.findChildren()
<!-- -->      for single_rd_child in single_rd_children:
<!-- -->        if single_rd_child.has_attr(&#x27;class&#x27;) and single_rd_child[&#x27;class&#x27;][0] == &#x27;rd_desc&#x27;:
<!-- -->          description = single_rd_child.getText()
<!-- -->          try:
<!-- -->            reports.append(self._description_matcher(description))
<!-- -->          except Exception as e:
<!-- -->            # print(e)
<!-- -->            pass
<!-- -->          break
<!-- -->    return reports
<!-- -->  
<!-- -->  def fetch_all_reports(self):
<!-- -->    # get the total number of pages and start iterating
<!-- -->    page = requests.get(f&quot;{GlobalMarketInsights.__DEFAULT_BASE_URL}?page=1&quot;)
<!-- -->    lun_q = &#x27;Displaying \d+ records out of (\d+) on Page \d+ of (\d+)&#x27;
<!-- -->    r = re.search(lun_q, page.text)
<!-- -->    if r:
<!-- -->        number_of_records = r.group(1)
<!-- -->        number_of_pages = r.group(2)
<!-- -->    else:
<!-- -->      raise Exception(&#x27;No pages or data!&#x27;)
<!-- -->    
<!-- -->    all_reports = []
<!-- -->    for page in range(1, int(number_of_pages) + 1, 1):
<!-- -->      page_reports = self.get(page=page)
<!-- -->      all_reports += page_reports
<!-- -->
<!-- -->    return int(number_of_records), all_reports
</code></pre><p>Scraping web pages is always challenging. In this case especially, the task was a bit tedious since the different report descriptions where not following a unique pattern.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>global_market_insights = GlobalMarketInsights()
</span>number_of_records, all_reports = global_market_insights.fetch_all_reports()
<!-- -->print(f&quot;Parsed {len(all_reports)} out of {number_of_records} report descriptions!&quot;)
</code></pre><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>Parsed 1200 out of 1964 report descriptions!</span></code></pre><p>Next, we add the reports to a dataframe for better presentation and easier data manipulation.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>import pandas as pd
</span>
<!-- -->gmi_reports_df = pd.DataFrame(all_reports) 
<!-- -->gmi_reports_df.head()
</code></pre><div><div>
<table border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>market</th>
      <th>percentage</th>
      <th>start</th>
      <th>end</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Food phosphate</td>
      <td>6.0</td>
      <td>2021</td>
      <td>2027</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Supply Chain Analytics</td>
      <td>16.0</td>
      <td>2021</td>
      <td>2027</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Cooking Coconut Milk</td>
      <td>8.5</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Steel Rebar</td>
      <td>4.0</td>
      <td>2021</td>
      <td>2027</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2,5-Dimethyl-2,4-Hexadiene</td>
      <td>2.5</td>
      <td>2021</td>
      <td>2027</td>
    </tr>
  </tbody>
</table>
</div></div><p>So far, so good! Let&#x27;s try to sort by percentage and see which sector is projected to perform more than 30% the following years.</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>sector_projection_ascending = gmi_reports_df.sort_values(&#x27;percentage&#x27;, ascending=False)
</span>sector_projection_ascending.loc[(sector_projection_ascending[&#x27;percentage&#x27;]&gt;30) &amp; (sector_projection_ascending[&#x27;start&#x27;]&gt;=2020)]
</code></pre><div><div>
<table border="1">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>market</th>
      <th>percentage</th>
      <th>start</th>
      <th>end</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>435</th>
      <td>SD-WAN</td>
      <td>60.0</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>575</th>
      <td>Cannabidiol (CBD)</td>
      <td>52.7</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>393</th>
      <td>(Light Fidelity) Li-Fi</td>
      <td>50.0</td>
      <td>2020</td>
      <td>2030</td>
    </tr>
    <tr>
      <th>40</th>
      <td>Healthcare Artificial Intelligence</td>
      <td>43.7</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>153</th>
      <td>Automotive Subscription Services</td>
      <td>40.0</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>964</th>
      <td>AI in Manufacturing</td>
      <td>40.0</td>
      <td>2020</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>363</th>
      <td>Artificial Intelligence (AI) in BFSI</td>
      <td>40.0</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>50</th>
      <td>Robotic Process Automation</td>
      <td>40.0</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>207</th>
      <td>Fuel Cell Electric Vehicle</td>
      <td>38.0</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>637</th>
      <td>AI in Automotive</td>
      <td>35.0</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>503</th>
      <td>Artificial Intelligence Chipsets</td>
      <td>35.0</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>105</th>
      <td>Total Knee Replacement</td>
      <td>34.7</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>212</th>
      <td>Vaginal Rejuvenation</td>
      <td>33.7</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>342</th>
      <td>Carbon Wheels</td>
      <td>32.3</td>
      <td>2020</td>
      <td>2026</td>
    </tr>
  </tbody>
</table>
</div></div><p>It is becoming pretty obvious that everything around Artificial Intelligence yields the best projections, and is an attractive area for investments :)</p></div><hr class="mt-4"/><footer></footer></article><nav class="flex flex-wrap justify-between mb-10"><a class="text-lg font-bold" href="/post/are-stock-returns-normally-distributed">←<!-- --> <!-- -->Are Stock Returns Normally Distributed?</a><a class="text-lg font-bold" href="/post/portfolio-expected-return-and-risk">Return &amp; Volatility of a multi asset portfolio<!-- --> <!-- -->→</a></nav><div shortname="investingsnippets" config="[object Object]" id="disqus_thread"></div></div><div class="w-full lg:w-1/3 px-2"><div class="border border-dotted mt-4 visible lg:invisible lg:mt-0"></div><div class="my-4 lg:mt-0"><content><h5 class="font-semibold text-lg uppercase text-gray-700">About<!-- --> <!-- -->InvestingSnippets</h5><div class="flex-auto flex-no-wrap flex-shrink-0 text-center pt-5"><a href="https://twitter.com/investingsnipts" class="inline-block hover:text-blue-700 no-label px-2" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="25px"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a href="https://github.com/investingsnippets" class="inline-block hover:text-blue-700 no-label px-2" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" width="25px"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="https://www.linkedin.com/in/investingsnippets/" class="inline-block hover:text-blue-700 no-label px-2" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="25px"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></div><div class="flex items-center my-5"><p class="text-base leading-7">Driven by my passion to always dive deep in new knowledge, I started this blog as an attempt to give my own simplified view on how I apply my Software Engineering skills and background in Mathematics to Investing! NO financial advice or consulting is provided! I use python and try to automate as much as possible.</p></div><div class="flex"><a href="https://twitter.com/investingsnipts" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false"> </a></div></content></div><div class="border border-dotted"></div><div class="my-2 lg:my-4"><content><h5 class="font-semibold text-lg uppercase text-gray-700 mb-2"> Topics </h5><ul><li class="p-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300"><a class="flex items-center text-gray-600 cursor-pointer" href="/topic/mathematics"><span>Mathematics</span><span class="text-gray-500 ml-auto">4<!-- --> <!-- -->articles</span><i class="text-gray-500 bx bx-right-arrow-alt ml-1"></i></a></li><li class="p-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300"><a class="flex items-center text-gray-600 cursor-pointer" href="/topic/investing"><span>Investing</span><span class="text-gray-500 ml-auto">3<!-- --> <!-- -->articles</span><i class="text-gray-500 bx bx-right-arrow-alt ml-1"></i></a></li><li class="p-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300"><a class="flex items-center text-gray-600 cursor-pointer" href="/topic/automation"><span>Automation</span><span class="text-gray-500 ml-auto">1<!-- --> <!-- -->articles</span><i class="text-gray-500 bx bx-right-arrow-alt ml-1"></i></a></li></ul></content></div><div class="border border-dotted"></div><div class="my-2 lg:my-4"><content><h5 class="font-semibold text-lg uppercase text-gray-700 mb-2"> Popular Tags </h5><ul><li class="p-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300"><a class="flex items-center text-gray-600 cursor-pointer" href="/tag/python"><div class="filter-orange-700 h-4 w-4 mr-3 inline-block"><img class="lazyload blur-up" alt="python" data-srcset="https://www.investingsnippets.com/static/python.svg"/></div><span>python</span><span class="text-gray-500 ml-auto">5<!-- --> <!-- -->articles</span><i class="text-gray-500 bx bx-right-arrow-alt ml-1"></i></a></li><li class="p-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300"><a class="flex items-center text-gray-600 cursor-pointer" href="/tag/statistics"><div class="filter-orange-700 h-4 w-4 mr-3 inline-block"><img class="lazyload blur-up" alt="statistics" data-srcset="https://www.investingsnippets.com/static/statistics.svg"/></div><span>statistics</span><span class="text-gray-500 ml-auto">4<!-- --> <!-- -->articles</span><i class="text-gray-500 bx bx-right-arrow-alt ml-1"></i></a></li></ul></content></div><div class="border border-dotted"></div><div class="my-2 lg:my-4"><content><h5 class="font-semibold text-lg uppercase text-gray-700 mb-2"> Subscribe </h5><p class="text-gray-600">Receive the next blog article directly to your email!</p><form action="https://tinyletter.com/[object Object]" method="post" target="popupwindow"><input type="email" name="email" id="tlemail" title="Email" required="" placeholder="your email address" class="text-gray-700 bg-gray-100 rounded-t hover:outline-none p-2 w-full mt-4 border outline-none"/><input type="hidden" value="1" name="embed"/><button type="submit" class="px-4 py-2 bg-orange-700 text-gray-200 rounded-b w-full capitalize tracking-wide">Subscribe</button></form><p class="text-gray-600 pt-2 text-xs text-center">or, follow the<!-- --> <a href="/feed.xml" class="inline-block hover:text-blue-700 no-label px-2" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="10px"><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg></a></p></content></div><div class="border border-dotted invisible lg:visible"></div></div></main><footer class="border-t py-12 px-2"><div class="flex pb-4"><div class="flex-auto"><h6><a class="font-semibold text-gray-700 mb-4 no-underline" href="/">Home</a></h6></div><div class="flex-auto"><h6><a class="font-semibold text-gray-700 mb-4 no-underline" href="/terms/general-terms">Terms</a></h6></div></div><div class="text-sm my-2 leading-4 text-gray-600">The content, opinions and conclusions on this website are NOT to be construed as financial advice. I always recommend contacting a licensed independent financial advisor. InvestingSnippets assumes no responsibility for any losses, costs or other consequences that may arise from actions or measures taken based on the content of the website. Investing in financial instruments, securities and mutual funds always involves a risk. The instruments can both increase and decrease in value, also as a result of changes in the exchange rate. It is not certain that you will get back the invested capital. Historical returns are no guarantee of future returns.</div><div class="my-2 text-sm text-gray-600">Copyright ©<!-- --> <!-- -->2021<!-- -->,<!-- --> <!-- -->InvestingSnippets</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"frontmatter":{"title":"Global Market Insights after the Pandemic.","description":"What are the projections after the Pandemic? Let's explore ...","date":"January 21, 2021","topic":{"id":"investing","name":"Investing","image":"investing.png","description":"The piggy bank digests a good amount of the savings! There is only one way to get away ... investing. BUT, there is a hidden enemy, Speculation!","color":"bg-green-300"},"tags":[{"id":"python","name":"python","image":"python-header.png","description":"Python is very handy in investing","color":"bg-green-300","icon":"python.svg"}],"author":{"id":"chris","name":"Chris","image":"https://s.gravatar.com/avatar/db809ecfa64d56da4bd9704c8393005a?s=80","description":"Software Engineer, passionate about ..."},"img":"/static/after-covid-19.jpeg","colab":"https://colab.research.google.com/drive/1nPyDupJHidnP5DLfAEKX3eYiY-MHCDmM?usp=sharing"},"post":{"content":"\n2020 was a difficult year and most of the market segments diverged from the projections! With the new facts at hand, and the emerging needs after the pandemic, we should expect changes in the market.\n\nBelow is an attempt to get a feeling of the emerging sectors by analyzing some [Global Market Insights](https://www.gminsights.com/) reports.\n\nAnd as always, let's automate ...\n\n```\n!pip install requests beautifulsoup4\nimport requests\nimport re\nfrom bs4 import BeautifulSoup\nimport string\n\nclass GlobalMarketInsights:\n  __DEFAULT_BASE_URL = 'https://www.gminsights.com/industry-reports'\n  \n  @staticmethod\n  def _escape(input):\n    printable = string.ascii_letters + string.digits + string.punctuation + ' '\n    return ''.join(c if c in printable else ' ' for c in input )\n\n  def _description_matcher(self, descr):\n    descr = GlobalMarketInsights._escape(descr.replace('\\t', ' ').replace('\\n', ' ').replace('\\r', ' '))\n\n    start_date = end_date = percentage = market_name = None\n\n    r1 = re.search('^(.*) (?:Market|Aftermarket) .*$', descr, re.IGNORECASE)\n    if r1:\n      market_name = r1.group(1).strip()\n\n    r2 = re.search('.* between (\\d+) (?:and|to) (\\d+)', descr)\n    if r2:\n      start_date = r2.group(1).strip()\n      end_date = r2.group(2).strip()\n    \n    r3 = re.search('.* (?:from|of) (\\d+) to (\\d+)', descr)\n    if r3:\n      start_date = r3.group(1).strip()\n      end_date = r3.group(2).strip()\n    \n    r4 = re.search('([-+]?\\d*\\.\\d+|\\d+)%', descr)\n    if r4:\n      percentage = r4.group(1)\n    \n    if None in (market_name, percentage, start_date, end_date):\n      raise Exception(f\"Couldn't parse: {descr}\")\n    else:\n      return {\n        \"market\": market_name,\n        \"percentage\" : float(percentage),\n        \"start\": int(start_date),\n        \"end\": int(end_date)\n      }\n\n  def get(self, page=1):\n    page = requests.get(f\"{GlobalMarketInsights.__DEFAULT_BASE_URL}?page={page}\")\n    soup = BeautifulSoup(page.text, 'html.parser')\n    single_rds = soup.find_all('div', class_='single_rd')\n    reports = []\n    for single_rd in single_rds:\n      single_rd_children = single_rd.findChildren()\n      for single_rd_child in single_rd_children:\n        if single_rd_child.has_attr('class') and single_rd_child['class'][0] == 'rd_desc':\n          description = single_rd_child.getText()\n          try:\n            reports.append(self._description_matcher(description))\n          except Exception as e:\n            # print(e)\n            pass\n          break\n    return reports\n  \n  def fetch_all_reports(self):\n    # get the total number of pages and start iterating\n    page = requests.get(f\"{GlobalMarketInsights.__DEFAULT_BASE_URL}?page=1\")\n    lun_q = 'Displaying \\d+ records out of (\\d+) on Page \\d+ of (\\d+)'\n    r = re.search(lun_q, page.text)\n    if r:\n        number_of_records = r.group(1)\n        number_of_pages = r.group(2)\n    else:\n      raise Exception('No pages or data!')\n    \n    all_reports = []\n    for page in range(1, int(number_of_pages) + 1, 1):\n      page_reports = self.get(page=page)\n      all_reports += page_reports\n\n    return int(number_of_records), all_reports\n```\n\nScraping web pages is always challenging. In this case especially, the task was a bit tedious since the different report descriptions where not following a unique pattern.\n\n```\nglobal_market_insights = GlobalMarketInsights()\nnumber_of_records, all_reports = global_market_insights.fetch_all_reports()\nprint(f\"Parsed {len(all_reports)} out of {number_of_records} report descriptions!\")\n```\n\n    Parsed 1200 out of 1964 report descriptions!\n\nNext, we add the reports to a dataframe for better presentation and easier data manipulation.\n\n```\nimport pandas as pd\n\ngmi_reports_df = pd.DataFrame(all_reports) \ngmi_reports_df.head()\n```\n\n\u003cdiv\u003e\n\u003ctable border=\"1\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003emarket\u003c/th\u003e\n      \u003cth\u003epercentage\u003c/th\u003e\n      \u003cth\u003estart\u003c/th\u003e\n      \u003cth\u003eend\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e0\u003c/th\u003e\n      \u003ctd\u003eFood phosphate\u003c/td\u003e\n      \u003ctd\u003e6.0\u003c/td\u003e\n      \u003ctd\u003e2021\u003c/td\u003e\n      \u003ctd\u003e2027\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1\u003c/th\u003e\n      \u003ctd\u003eSupply Chain Analytics\u003c/td\u003e\n      \u003ctd\u003e16.0\u003c/td\u003e\n      \u003ctd\u003e2021\u003c/td\u003e\n      \u003ctd\u003e2027\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2\u003c/th\u003e\n      \u003ctd\u003eCooking Coconut Milk\u003c/td\u003e\n      \u003ctd\u003e8.5\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e3\u003c/th\u003e\n      \u003ctd\u003eSteel Rebar\u003c/td\u003e\n      \u003ctd\u003e4.0\u003c/td\u003e\n      \u003ctd\u003e2021\u003c/td\u003e\n      \u003ctd\u003e2027\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e4\u003c/th\u003e\n      \u003ctd\u003e2,5-Dimethyl-2,4-Hexadiene\u003c/td\u003e\n      \u003ctd\u003e2.5\u003c/td\u003e\n      \u003ctd\u003e2021\u003c/td\u003e\n      \u003ctd\u003e2027\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\nSo far, so good! Let's try to sort by percentage and see which sector is projected to perform more than 30% the following years.\n\n```\nsector_projection_ascending = gmi_reports_df.sort_values('percentage', ascending=False)\nsector_projection_ascending.loc[(sector_projection_ascending['percentage']\u003e30) \u0026 (sector_projection_ascending['start']\u003e=2020)]\n```\n\n\u003cdiv\u003e\n\u003ctable border=\"1\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003emarket\u003c/th\u003e\n      \u003cth\u003epercentage\u003c/th\u003e\n      \u003cth\u003estart\u003c/th\u003e\n      \u003cth\u003eend\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e435\u003c/th\u003e\n      \u003ctd\u003eSD-WAN\u003c/td\u003e\n      \u003ctd\u003e60.0\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e575\u003c/th\u003e\n      \u003ctd\u003eCannabidiol (CBD)\u003c/td\u003e\n      \u003ctd\u003e52.7\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e393\u003c/th\u003e\n      \u003ctd\u003e(Light Fidelity) Li-Fi\u003c/td\u003e\n      \u003ctd\u003e50.0\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2030\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e40\u003c/th\u003e\n      \u003ctd\u003eHealthcare Artificial Intelligence\u003c/td\u003e\n      \u003ctd\u003e43.7\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e153\u003c/th\u003e\n      \u003ctd\u003eAutomotive Subscription Services\u003c/td\u003e\n      \u003ctd\u003e40.0\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e964\u003c/th\u003e\n      \u003ctd\u003eAI in Manufacturing\u003c/td\u003e\n      \u003ctd\u003e40.0\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2025\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e363\u003c/th\u003e\n      \u003ctd\u003eArtificial Intelligence (AI) in BFSI\u003c/td\u003e\n      \u003ctd\u003e40.0\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e50\u003c/th\u003e\n      \u003ctd\u003eRobotic Process Automation\u003c/td\u003e\n      \u003ctd\u003e40.0\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e207\u003c/th\u003e\n      \u003ctd\u003eFuel Cell Electric Vehicle\u003c/td\u003e\n      \u003ctd\u003e38.0\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e637\u003c/th\u003e\n      \u003ctd\u003eAI in Automotive\u003c/td\u003e\n      \u003ctd\u003e35.0\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e503\u003c/th\u003e\n      \u003ctd\u003eArtificial Intelligence Chipsets\u003c/td\u003e\n      \u003ctd\u003e35.0\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e105\u003c/th\u003e\n      \u003ctd\u003eTotal Knee Replacement\u003c/td\u003e\n      \u003ctd\u003e34.7\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e212\u003c/th\u003e\n      \u003ctd\u003eVaginal Rejuvenation\u003c/td\u003e\n      \u003ctd\u003e33.7\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e342\u003c/th\u003e\n      \u003ctd\u003eCarbon Wheels\u003c/td\u003e\n      \u003ctd\u003e32.3\u003c/td\u003e\n      \u003ctd\u003e2020\u003c/td\u003e\n      \u003ctd\u003e2026\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\nIt is becoming pretty obvious that everything around Artificial Intelligence yields the best projections, and is an attractive area for investments :)\n","excerpt":""},"previousPost":{"slug":"are-stock-returns-normally-distributed","frontmatter":{"title":"Are Stock Returns Normally Distributed?","description":"What do you think?","date":"December 20, 2020","topic":{"id":"investing","name":"Investing","image":"investing.png","description":"The piggy bank digests a good amount of the savings! There is only one way to get away ... investing. BUT, there is a hidden enemy, Speculation!","color":"bg-green-300"},"tags":[{"id":"python","name":"python","image":"python-header.png","description":"Python is very handy in investing","color":"bg-green-300","icon":"python.svg"}],"author":{"id":"chris","name":"Chris","image":"https://s.gravatar.com/avatar/db809ecfa64d56da4bd9704c8393005a?s=80","description":"Software Engineer, passionate about ..."},"img":"/static/normal-dist-with-hist.png","colab":"https://colab.research.google.com/drive/1iYrNJ9ISktohy1dG2s16_FZKakB8FLU5?usp=sharing"},"excerpt":"","content":"\nIn a previous post we talked about the [Higher Moments of a Distribution](/post/higher-moments-of-a-distribution). We saw that skewness and kurtosis are two attributes that can identify if a distribution is normal or not (skewnes = 0 \u0026 kurtosis = 3).\n\nLet's try this approach on the MSFT's stock.\n\n\n```\n%pip install yahoofinancials\nfrom yahoofinancials import YahooFinancials\nimport pandas as pd\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport dateutil.parser\nimport numpy as np\n\nmatplotlib.rcParams['figure.figsize'] = (10.0, 5.0)\nmatplotlib.style.use('ggplot')\n\ndef retrieve_stock_data(ticker, start, end):\n    json = YahooFinancials(ticker).get_historical_price_data(start, end, \"daily\")\n    columns=[\"adjclose\"]  # [\"open\",\"close\",\"adjclose\"]\n    df = pd.DataFrame(columns=columns)\n    for row in json[ticker][\"prices\"]:\n        d = dateutil.parser.isoparse(row[\"formatted_date\"])\n        df.loc[d] = [row[\"adjclose\"]] # [row[\"open\"], row[\"close\"], row[\"adjclose\"]]\n    df.index.name = \"date\"\n    return df\n\ndef normal_rets(S):\n    return S.pct_change().dropna()\n\ndef log_rets(S):\n    rets = np.log(S) - np.log( S.shift(1))\n    return rets[1:]\n\nstock_prices = retrieve_stock_data(\"MSFT\", \"2000-01-01\", \"2020-01-01\")\n\nrets = normal_rets(stock_prices).dropna()\nrets.columns = ['returns']\nrets.plot(figsize=(14,7))\nplt.title(\"Daily returns\", weight=\"bold\");\n```\n  \n![png](are-stock-returns-normally-distributed/are-stock-returns-normally-distributed-1-1.png)\n\nLet's print skewness and kurtosis:\n\n```\nfrom scipy.stats import kurtosis, skew\nskew(rets, bias=False)[0], kurtosis(rets, bias=False, fisher=False)[0]\n```\n\n    (0.20887713542026032, 13.229622042763442)\n\nIt is obvious that the MSFT stock returns for that period follow a leptokurtic distribution and are far from normal. Same, of course, happens if we get the log returns instead.\n\n```\nlog_msft_rets = log_rets(stock_prices).dropna()\nskew(log_msft_rets, bias=False)[0], kurtosis(log_msft_rets, bias=False, fisher=False)[0]\n```\n\n    (-0.12981025399984283, 12.81366131030108)\n\n## Normality Tests\n\nThere are several interrelated approaches to determining normality.\n\n1. Histogram with the normal curve superimposed. Unfortunately, there is no automated way to represent the \"fitness\" as a value. This approach is empirical mostly and requires experience.\n\n2. Skewness \u0026 Kurtosis Tests.\n\n3. Normality plots. “Normal Q-Q Plot” provides a graphical way to determine the level of normality.\n\n4. Normality tests. The Kolmogorov-Smirnov test (K-S) and Shapiro-Wilk (S-W) test are designed to test normality by comparing your data to a normal distribution with the same mean and standard deviation of your sample. If the test is NOT significant, then the data are normal, so any value above .05 indicates normality. If the test is significant (less than .05), then the data are non-normal.\n\n### Histogram \u0026 Normal PDF\n\n```\nfrom scipy.stats import norm\nx = np.linspace(min(rets.returns.values), max(rets.returns.values))\nax = rets.plot(kind='hist', bins=500, density=True)\npdf_fitted = norm.pdf(x, *norm.fit(rets.returns.values))\npd.Series(pdf_fitted, x).plot(ax=ax)\nplt.show()\n```\n    \n![png](are-stock-returns-normally-distributed/are-stock-returns-normally-distributed-8-0.png)\n\n### Skewness \u0026 Kurtosis Tests\n\n```\nfrom scipy import stats\nstats.kurtosistest(rets.returns)\n```\n\n    KurtosistestResult(statistic=29.93227785492693, pvalue=7.484189304773088e-197)\n\n```\nstats.skewtest(rets.returns)\n```\n\n    SkewtestResult(statistic=5.99114785753993, pvalue=2.083650895527666e-09)\n\n### QQ-Plot\n\n```\nfrom numpy.random import seed\nfrom statsmodels.graphics.gofplots import qqplot\nfrom matplotlib import pyplot\nseed(1)\nqqplot(rets.returns, line='s')\npyplot.show()\n```\n    \n![png](are-stock-returns-normally-distributed/are-stock-returns-normally-distributed-13-0.png)\n    \n\nThe Quantile-Quantile plot, as the name suggests, will compare the quantiles between the normal distribution and our data. We notice here that, the tails of the distribution of our data are diverging a lot from the normal distribution. This is what we would expect. Fat tails!\n\n### Statistical Normality Tests\n\nThe tests assume that that the sample was drawn from a Gaussian distribution. Technically this is called the null hypothesis, or H0. A threshold level is chosen called alpha, typically 5% (or 0.05), that is used to interpret the p-value.\n\nIn the SciPy implementation of these tests, you can interpret the p value as follows.\n\n* p \u003c= alpha: reject H0, not normal.\n* p \u003e alpha: fail to reject H0, normal.\n\nThis means that, in general, we are seeking results with a larger p-value to confirm that our sample was likely drawn from a Gaussian distribution.\n\nA result above 5% does not mean that the null hypothesis is true. It means that it is very likely true given available evidence. The p-value is not the probability of the data fitting a Gaussian distribution; it can be thought of as a value that helps us interpret the statistical test.\n\n#### Kolmogorov-Smirnov test (K-S)\n\n\n```\nkstest = stats.kstest(rets.returns, 'norm')\nkstest.pvalue \u003e 0.05\n```\n\n    False\n\n#### Shapiro-Wilk Test\n\n```\nshapiro_stat, shapiro_p = stats.shapiro(rets.returns)\nshapiro_p \u003e 0.05\n```\n\n    False\n\n\n#### D’Agostino’s K^2 Test\n\nThe D’Agostino’s K^2 test calculates summary statistics from the data, namely kurtosis and skewness, to determine if the data distribution departs from the normal distribution, named for Ralph D’Agostino.\n\n* Skew is a quantification of how much a distribution is pushed left or right, a measure of asymmetry in the distribution.\n* Kurtosis quantifies how much of the distribution is in the tail.\n\nIt is a simple and commonly used statistical test for normality.\n\n```\nseed(1)\ndagostino_stat, dagostino_p = stats.normaltest(rets.returns)\ndagostino_p \u003e 0.05\n```\n\n    False\n\n#### Jarque-Bera Test for Normality\n\n```\njarque_bera_stat, jarque_bera_p = stats.jarque_bera(rets.returns)\njarque_bera_p \u003e 0.05\n```\n\n    False\n\n## Conclusion\n\nIn this post we went through some techniques that allow us identify if stock returns are normally distributed. We saw, with an example, that returns (arithmetic, or log) are not normally distributed but instead exhibit fat tails. I cannot generalize of course by only one example that I provide here, but I will leave that as a small exercise to the curious readers.\n\nThe question that is now left is? Since the (I could event say here, financial asset returns (everything that is publicly traded)) returns are not following a normal distribution, that what type of distribution they follow?\n\nThe answer to that ... in a later article! :)\n"},"nextPost":{"slug":"portfolio-expected-return-and-risk","frontmatter":{"title":"Return \u0026 Volatility of a multi asset portfolio","description":"Maths are magical :) And why diversification makes sense!","date":"January 31, 2021","topic":{"id":"investing","name":"Investing","image":"investing.png","description":"The piggy bank digests a good amount of the savings! There is only one way to get away ... investing. BUT, there is a hidden enemy, Speculation!","color":"bg-green-300"},"tags":[{"id":"statistics","name":"statistics","image":"statistics.jpg","description":"Statistics is the discipline that concerns the collection, organization, analysis, interpretation and presentation of data. - Wikipedia","color":"bg-green-300","icon":"statistics.svg"}],"author":{"id":"chris","name":"Chris","image":"https://s.gravatar.com/avatar/db809ecfa64d56da4bd9704c8393005a?s=80","description":"Software Engineer, passionate about ..."},"img":"/static/magic.png","colab":"https://colab.research.google.com/drive/1lNirrCFUfWaZ_Cci-mmsio79wX_KwR5b?usp=sharing"},"excerpt":"","content":"\nIn previous posts we talked about the [expected return](/post/measures-of-location) (mean value of a distribution) and the [volatility](/post/measures-of-variability) (standard deviation) of an asset.\n\nBut, in investing, we rarely hold a portfolio of just one stock! Let's start then, by picking two stocks.\n\nThe first question is: OK, what percentage of the total investment amount shall we allocate to stock A and what to stock B?\n\nIf we allocate 100% to A and 0% to B or the other way around, then we get into the \"one asset\" portfolio and that is not desirable! Let's assume that we set 50% on asset A and 50% on asset B. Let's also call this percentage allocations, weights (w_A, w_B respectively).\n\nIn that case, we are asked to come up with the return (mean) and the volatility (standard deviation) of the portfolio.\n\nSomeone would blindly assume that the `Return = (w_A * R_A) + (w_B * R_B)` and `Volatility = (w_A * std_A) + (w_B * std_B)`. Well, maths keep always surprising us, and that is the case here!\n\nWhile indeed the return of the 2 asset portfolio is the average weighted returns,\n\n$$\nR_{A,B} = w_A*R_A + w_B*R_B  \\qquad (1)\n$$\n\nthe volatility is\n\n$$\n\\sigma_{A,B}=\\sqrt{\\sigma_A^2w_A^2 + \\sigma_B^2w_B^2 + 2w_Aw_B\\sigma_A\\sigma_B\\rho_{A,B}}  \\quad (2)\n$$\n\nThis second (2) equation tells us that the standard deviation of a 2 asset distribution is equal to the square root of the variance of asset A multiplied by the squared weight of A plus the variance of asset B multiplied by the squared weight of B, plus twice the product of variance of A times the variance of B times the weight of A times the weight of B times the correlation coefficient of A and B!\n\nSo far so good! But where exactly does the magic begin? Well, the correlation coefficient is not always a positive number :O\n\nThe correlation coefficient can take values between -1 and 1. -1 when the two assets are totally uncorrelated, which means that when the first asset goes up the other goes down at the same pace and same angle. 1 when both assets move to the same direction with the same pace and same angle (either positive or negative direction). Values between -1 and 1 indicate a more loose correlation, but show the trend.\n\nBack to the equation (2). If we have a negative correlation of the assets, the total volatility is less than the average volatility, and if we have a positive correlation the total volatility is more that the average.\n\nIt becomes pretty obvious that by just combining two non correlated assets we can achieve volatility sometimes even smaller than the assets' individually. Who wouldn't want that!\n\n\u003e Keep in mind that $\\rho_{A,B} = \\frac{cov_{A,B}}{\\sigma_A\\sigma_B}$ where $cov_{A,B}$ is the covariance of the two variables.\n\nLet's see an example...\n\n## Real example of a two asset portfolio\n\nAt first, let's set the ground work to be able to fetch some stock prices.\n\n```\n%pip install yahoofinancials\nfrom yahoofinancials import YahooFinancials\nimport pandas as pd\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport dateutil.parser\nimport numpy as np\n\ndef retrieve_stock_data(ticker, start, end):\n    json = YahooFinancials(ticker).get_historical_price_data(start, end, \"daily\")\n    columns=[\"adjclose\"]  # [\"open\",\"close\",\"adjclose\"]\n    df = pd.DataFrame(columns=columns)\n    for row in json[ticker][\"prices\"]:\n        d = dateutil.parser.isoparse(row[\"formatted_date\"])\n        df.loc[d] = [row[\"adjclose\"]] # [row[\"open\"], row[\"close\"], row[\"adjclose\"]]\n    df.index.name = \"date\"\n    return df\n\ndef normal_rets(S):\n    return S.pct_change().dropna()\n```\n\nWe are now ready to fetch prices. I have picked Microsoft Corporation (MSFT) and Alpha Pro Tech, Ltd. (APT). Below we see how the price of the stocks unfolded throughout 2020! \n\n```\nmsft_stock_prices = retrieve_stock_data(\"MSFT\", \"2020-01-01\", \"2021-01-01\")\nmsft_rets = normal_rets(msft_stock_prices).dropna()\nmsft_rets.columns = ['returns']\n\napt_stock_prices = retrieve_stock_data(\"APT\", \"2020-01-01\", \"2021-01-01\")\napt_rets = normal_rets(apt_stock_prices).dropna()\napt_rets.columns = ['returns']\n\nf, (ax1, ax2) = plt.subplots(1, 2, sharex=True)\nmsft_stock_prices.plot(figsize=(14,7), ax=ax1)\napt_stock_prices.plot(figsize=(14,7), ax=ax2)\nax1.get_legend().remove()\nax2.get_legend().remove()\nax1.title.set_text('MSFT Price Chart')\nax2.title.set_text('APT Price Chart')\nplt.show()\n```\n\n![png](portfolio-expected-return-and-risk/portfolio-expected-return-and-risk_4_0.png)\n\nThe graphs show some king of un-correlation. When one stock goes up the other goes down and vice versa. Let's explore the average return, standard deviation and correlation of the stocks.\n\n```\nmsft_rets.mean().values[0], apt_rets.mean().values[0]\n```\n    (0.0017171460669071206, 0.009654517798428635)\n\n\n```\nmsft_rets.std().values[0], apt_rets.std().values[0]\n```\n    (0.027679154652983044, 0.10987021868530256)\n\n```\nreturns = msft_rets.merge(apt_rets, left_index=True, right_index=True)\nreturns.columns = ['MSFT', 'APT']\nreturns.corr()\n```\n\n\u003cdiv\u003e\n\u003ctable border=\"1\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003eMSFT\u003c/th\u003e\n      \u003cth\u003eAPT\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003eMSFT\u003c/th\u003e\n      \u003ctd\u003e1.0000\u003c/td\u003e\n      \u003ctd\u003e-0.2182\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003eAPT\u003c/th\u003e\n      \u003ctd\u003e-0.2182\u003c/td\u003e\n      \u003ctd\u003e1.0000\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\n\nObviously, both stocks yield a positive average daily return (small but positive), and while MSFT has a volatility around ~2.8%, APT is at ~11%, which denotes a very volatile asset. As expected, the correlation of the two assets is negative.\n\nLet us now try to construct a portfolio of these two assets. From equations (1) and (2) we see that the weights are variable. We should also notice that the return is not a series of returns anymore but a single value. This value is the total return of an asset over the year. It is the so called [`Annualized Return`](/post/geometric-progression-and-compounding-of-returns).\n\n\n```\ndef annualize_rets(r, periods_per_year):\n    compounded_growth = (1+r).prod()\n    n_periods = r.shape[0]\n    return compounded_growth**(periods_per_year/n_periods)-1\n\nannualized_returns = annualize_rets(returns, 252)\nannualized_returns\n```\n\n    MSFT    0.399429\n    APT     2.222543\n    dtype: float64\n\n\nAs you can see the annual return for 2020 for MSFT was ~40%, while for APT was ~220%! It is pretty obvious from the price graphs :)\n\nNow, we move on and try to generate some portfolios where we assign different weights to the assets and try to calculate the return and the volatility of the portfolio. I will not get into what transposing a matrix means in algebra since it is not the focus of this post. Please check [this wikipedia article](https://en.wikipedia.org/wiki/Transpose) for more info.\n\n\n```\n# from equation (1)\ndef portfolio_return(weights, returns):\n    return weights.T @ returns\n\n# from equation (2)\ndef portfolio_vol(weights, covariance_matrix):\n    return (weights.T @ covariance_matrix @ weights)**0.5\n\n# first we construct 10 pairs of weights like [(0.1,0.9), (0.2,0.8) ...]\nweights = [np.array([w, 1-w]) for w in np.linspace(0, 1, 10)]\n\n# then we calculate the return of the portfolio for each pair of weights\nportfolio_returns = [portfolio_return(w, annualized_returns) for w in weights]\n\n# and the volatility of the portfolio for each pair of weights\nvols = [portfolio_vol(w, returns.cov()) for w in weights]\n\nef = pd.DataFrame({\n    \"Return\": portfolio_returns, \n    \"Volatility\": vols,\n    \"weights\": weights\n})\n\nax = ef.plot(x=\"Volatility\", y=\"Return\", style=\".-\", figsize=(11,6),\n             title=\"2 Asset Portfolio Risk/Return\", legend=False)\nplt.ylabel(\"Return\")\n\ndef label_point(x, y, val, ax):\n  a = pd.concat({'x': x, 'y': y, 'val': val}, axis=1)\n  for i, point in a.iterrows():\n    prettified_p = f\"({round(point['val'][0], 2)},{round(point['val'][1], 2)})\"\n    ax.text(point['x'], point['y'], prettified_p)\n\nlabel_point(ef.Volatility, ef.Return, ef.weights, ax)\n```\n  \n![png](portfolio-expected-return-and-risk/portfolio-expected-return-and-risk_12_0.png)\n\nWhat the graph above tells us is that by combining the two assets we are able to achieve a total volatility (risk) that is less than each asset's individual volatility!\n\nObserve the left most point on the graph!\n\nIn a next post we will calculate the optimal weights that minimize the risk of a portfolio as well as explore portfolios with more than 2 assets.\n\n## Some More Notes\n\n* The approach I followed above is not something new. Is called [Markowitz Model](https://en.wikipedia.org/wiki/Markowitz_model) and won a [Nobel Price](https://www.nobelprize.org/prizes/economic-sciences/1990/press-release/) in 1990.\n* I tried to oversimplify the example, just to show the basics.\n* I randomly picked the two assets, in the example, from [IMPACTOPIA](http://www.market-topology.com/correlation/MSFT?etf=0).\n* We will prove later on that volatility changes over time :) and that would normally lead to rebalances.\n* As always, `Historical returns are no guarantee of future returns.`\n\nStay tuned ...\n"}},"tags":[{"id":"python","name":"python","image":"python-header.png","description":"Python is very handy in investing","color":"bg-green-300","icon":"python.svg","slug":"python","count":5},{"id":"statistics","name":"statistics","image":"statistics.jpg","description":"Statistics is the discipline that concerns the collection, organization, analysis, interpretation and presentation of data. - Wikipedia","color":"bg-green-300","icon":"statistics.svg","slug":"statistics","count":4}],"sortedTopics":[{"id":"mathematics","name":"Mathematics","image":"mathematics.png","description":"Investing, as part of the Science of Finance, is subject to the lows of Mathematics!","color":"bg-green-300","slug":"mathematics","count":4},{"id":"investing","name":"Investing","image":"investing.png","description":"The piggy bank digests a good amount of the savings! There is only one way to get away ... investing. BUT, there is a hidden enemy, Speculation!","color":"bg-green-300","slug":"investing","count":3},{"id":"automation","name":"Automation","image":"automation.jpg","description":"Spending time to do the same thing over and over again is tedious! Thus, I like to automate as much as possible.","color":"bg-green-300","slug":"automation","count":1}],"allTopics":[{"id":"mathematics","name":"Mathematics","image":"mathematics.png","description":"Investing, as part of the Science of Finance, is subject to the lows of Mathematics!","color":"bg-green-300"},{"id":"automation","name":"Automation","image":"automation.jpg","description":"Spending time to do the same thing over and over again is tedious! Thus, I like to automate as much as possible.","color":"bg-green-300"},{"id":"investing","name":"Investing","image":"investing.png","description":"The piggy bank digests a good amount of the savings! There is only one way to get away ... investing. BUT, there is a hidden enemy, Speculation!","color":"bg-green-300"}],"slug":"global-market-insights-after-the-pandemic"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"global-market-insights-after-the-pandemic"},"buildId":"KnGeJjd0-8Oo6M68q5Lss","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-6d6446214035a37ee7d9.js"></script><script src="/_next/static/chunks/main-9b805fa25f3c727dff23.js" async=""></script><script src="/_next/static/chunks/webpack-eb080e3f091731f228fb.js" async=""></script><script src="/_next/static/chunks/framework.1d36bc031662b4dc4c28.js" async=""></script><script src="/_next/static/chunks/bb1c34bc.d6f2610c02ca1f2f8023.js" async=""></script><script src="/_next/static/chunks/commons.8953387921da877f7077.js" async=""></script><script src="/_next/static/chunks/c993a675fc23e2c5b16b0cdfa51e09fd2f5f8f80.d32b4384330bdff42c69.js" async=""></script><script src="/_next/static/chunks/pages/_app-8d389892d8851416e9e3.js" async=""></script><script src="/_next/static/chunks/cb1608f2.374587486deb2a784e19.js" async=""></script><script src="/_next/static/chunks/a9a7754c.d9f31489d713bac24f81.js" async=""></script><script src="/_next/static/chunks/071290cb.0007511c5b3a58747892.js" async=""></script><script src="/_next/static/chunks/28b78d933298d505941537c6c1190f6a19d63af1.41b7ccb1b9a7b85862b6.js" async=""></script><script src="/_next/static/chunks/f485e41bcb118a628b46c21556cf62824a9a6265.1a408615a795a37f5f29.js" async=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-9717ed5a4d3fad8e5789.js" async=""></script><script src="/_next/static/KnGeJjd0-8Oo6M68q5Lss/_buildManifest.js" async=""></script><script src="/_next/static/KnGeJjd0-8Oo6M68q5Lss/_ssgManifest.js" async=""></script></body></html>