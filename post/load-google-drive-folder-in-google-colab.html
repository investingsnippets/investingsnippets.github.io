<!DOCTYPE html><html lang="en-US"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-180222243-1"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-180222243-1', {
              page_path: window.location.pathname,
            });
          </script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Load Google Drive folder in Google Colab</title><meta name="description" content="How to mount a Google Drive in Google Colab and load some stock data."/><meta property="og:type" content="website"/><meta name="og:title" property="og:title" content="Load Google Drive folder in Google Colab"/><meta name="og:description" property="og:description" content="How to mount a Google Drive in Google Colab and load some stock data."/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Load Google Drive folder in Google Colab"/><meta name="twitter:description" content="How to mount a Google Drive in Google Colab and load some stock data."/><meta name="twitter:creator" content="investingsnipts"/><link rel="icon" type="image/png" href="/static/favicon.ico"/><link rel="apple-touch-icon" href="/static/favicon.ico"/><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/f2e447e5ed0492309505.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f2e447e5ed0492309505.css" data-n-g=""/><link rel="preload" href="/_next/static/css/276cb3c5109fbc96253b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/276cb3c5109fbc96253b.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-9b805fa25f3c727dff23.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-eb080e3f091731f228fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1d36bc031662b4dc4c28.js" as="script"/><link rel="preload" href="/_next/static/chunks/bb1c34bc.d6f2610c02ca1f2f8023.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.8953387921da877f7077.js" as="script"/><link rel="preload" href="/_next/static/chunks/c993a675fc23e2c5b16b0cdfa51e09fd2f5f8f80.2c3b0eedf2090930e584.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8d389892d8851416e9e3.js" as="script"/><link rel="preload" href="/_next/static/chunks/cb1608f2.374587486deb2a784e19.js" as="script"/><link rel="preload" href="/_next/static/chunks/a9a7754c.d9f31489d713bac24f81.js" as="script"/><link rel="preload" href="/_next/static/chunks/071290cb.0007511c5b3a58747892.js" as="script"/><link rel="preload" href="/_next/static/chunks/28b78d933298d505941537c6c1190f6a19d63af1.41b7ccb1b9a7b85862b6.js" as="script"/><link rel="preload" href="/_next/static/chunks/f485e41bcb118a628b46c21556cf62824a9a6265.1a408615a795a37f5f29.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/post/%5Bslug%5D-9717ed5a4d3fad8e5789.js" as="script"/></head><body><div id="__next"><div class="overflow-hidden items-center justify-center bg-gray-100 max-w-screen-xl mx-auto"><header class="container"><nav class="relative select-none bg-grey lg:flex lg:items-stretch w-full pt-4"><div class="flex flex-no-shrink items-stretch h-12"><a class="flex-no-grow flex-no-shrink relative p-2 leading-normal text-3xl lg:text-5xl no-underline font-semibold flex items-center" href="/">InvestingSnippets</a><button id="hamburgerMenu" type="button" class="block lg:hidden cursor-pointer ml-auto relative w-12 h-12 p-4"><svg id="hamburgerBtn" class="visible fill-current text-gray-700" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg><svg id="hamburgerClose" class="hidden fill-current text-gray-700" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"></path></svg></button></div><div class="lg:flex lg:items-stretch lg:flex-no-shrink lg:flex-grow hidden" id="mobileMenu"><div class="lg:flex lg:items-stretch lg:justify-end ml-auto"><a class="flex-no-grow flex-no-shrink relative py-2 px-4 leading-normal font-semibold text-gray-700 no-underline flex items-center hover:bg-grey-dark" href="/topic/mathematics"><span>Mathematics</span></a><a class="flex-no-grow flex-no-shrink relative py-2 px-4 leading-normal font-semibold text-gray-700 no-underline flex items-center hover:bg-grey-dark" href="/topic/automation"><span>Automation</span></a><a class="flex-no-grow flex-no-shrink relative py-2 px-4 leading-normal font-semibold text-gray-700 no-underline flex items-center hover:bg-grey-dark" href="/topic/investing"><span>Investing</span></a></div></div></nav></header><main class="block lg:flex lg:space-x-2 px-2 lg:p-0 mt-10 mb-10"><div class="w-full lg:w-2/3 px-2"><article><header class="mb-8"><p class="text-sm mb-2"><a class="" href="/">Home</a> &gt; <a class="" href="/topic/automation">Automation</a> &gt; </p><h1 class="mb-2 text-3xl lg:text-4xl leading-none font-display font-semibold">Load Google Drive folder in Google Colab</h1><p class="text-sm mb-2">December 7, 2020<!-- --> <!-- -->by<!-- --> <!-- -->Chris</p><div class="flex justify-end mt-2 mr-5"><a class="text-gray-600" href="/tag/python"><img class="filter-orange-700 h-4 w-4 m-1 inline-block" alt="python" src="https://www.investingsnippets.com/static/python.svg" data-srcset="https://www.investingsnippets.com/static/python.svg"/>python</a></div></header><div class="mb-4 prose-lg"><p>There are several cases where:</p><ul><li>fetching stock prices is not possible through python libraries like <code>yahoofinancials</code> or other APIs</li><li>you want to load the same data over and over again (for parallelization)</li><li>you want to use you python modules without publishing them to a registry</li></ul><p>In these cases I find it very handy to store my data (csv format) and my modules in google drive.</p><p>However, loading the data to Google Colab turned into pain since I had to manually upload the files each time I wanted to run a notebook.</p><p>To avoid this situation I mount google drive and:</p><ol><li>add the folder with my python modules to the path</li><li>copy the data to the Colab data folder</li></ol><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-python" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">import</span><span> warnings
</span><span>warnings</span><span class="token" style="color:#999">.</span><span>simplefilter</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;ignore&#x27;</span><span class="token" style="color:#999">)</span><span>
</span>
<span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">%</span><span>config InlineBackend</span><span class="token" style="color:#999">.</span><span>figure_formats</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;png&quot;</span><span class="token" style="color:#999">]</span><span>
</span>
<span></span><span class="token" style="color:#07a">from</span><span> google</span><span class="token" style="color:#999">.</span><span>colab </span><span class="token" style="color:#07a">import</span><span> drive
</span><span>drive</span><span class="token" style="color:#999">.</span><span>mount</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;/content/drive&#x27;</span><span class="token" style="color:#999">,</span><span> force_remount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#905">True</span><span class="token" style="color:#999">)</span><span>
</span>
<span></span><span class="token" style="color:#07a">import</span><span> os
</span><span></span><span class="token" style="color:#07a">import</span><span> sys
</span><span></span><span class="token" style="color:#07a">import</span><span> glob
</span><span></span><span class="token" style="color:#07a">from</span><span> shutil </span><span class="token" style="color:#07a">import</span><span> copytree</span><span class="token" style="color:#999">,</span><span> copy
</span>
<span></span><span class="token" style="color:slategray"># This will add my python modules in the path</span><span>
</span><span>gdrive_base_path </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&#x27;/content/drive/My Drive/my-python-modules&#x27;</span><span>
</span><span>sys</span><span class="token" style="color:#999">.</span><span>path</span><span class="token" style="color:#999">.</span><span>append</span><span class="token" style="color:#999">(</span><span>gdrive_base_path</span><span class="token" style="color:#999">)</span><span>
</span>
<span></span><span class="token" style="color:#07a">try</span><span class="token" style="color:#999">:</span><span>
</span><span>  </span><span class="token" style="color:slategray"># copy the data we need</span><span>
</span><span>  copytree</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;/content/drive/My Drive/Colab Notebooks/data&#x27;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27;/content/data&#x27;</span><span class="token" style="color:#999">)</span><span>
</span><span></span><span class="token" style="color:#07a">except</span><span> Exception </span><span class="token" style="color:#07a">as</span><span> e</span><span class="token" style="color:#999">:</span><span>
</span><span>  </span><span class="token" style="color:#07a">pass</span><span>
</span>
<span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">%</span><span>reload_ext autoreload
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">%</span><span>autoreload </span><span class="token" style="color:#905">2</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">%</span><span>matplotlib inline
</span>
<span></span><span class="token" style="color:#07a">import</span><span> matplotlib</span><span class="token" style="color:#999">.</span><span>pyplot </span><span class="token" style="color:#07a">as</span><span> plt
</span><span></span><span class="token" style="color:#07a">import</span><span> seaborn
</span><span></span><span class="token" style="color:#07a">import</span><span> pandas </span><span class="token" style="color:#07a">as</span><span> pd
</span><span></span><span class="token" style="color:#07a">import</span><span> numpy </span><span class="token" style="color:#07a">as</span><span> np
</span><span></span><span class="token" style="color:#07a">import</span><span> scipy</span><span class="token" style="color:#999">.</span><span>stats </span><span class="token" style="color:#07a">as</span><span> st</span></code></pre><p>Since the folder that contain my python modules is now in the system path, I&#x27;m able to</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-python" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">import</span><span> my_module</span></code></pre><p>and whenever I change my modules (add more functionality, improvements), it practically saves it to Google Drive, since it is a pure mount.</p><p>When it comes to loading data, then I simply:</p><pre style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-python" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>MSFT </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> pd</span><span class="token" style="color:#999">.</span><span>read_csv</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;data/msft_daily.csv&#x27;</span><span class="token" style="color:#999">,</span><span> parse_dates</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#905">True</span><span class="token" style="color:#999">,</span><span> index_col</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span> header</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">)</span></code></pre><blockquote><p><strong>Note</strong>: Since <code>copytree</code> is used, uploading new data files to Google Colab, will not automatically save it to Google Drive!</p></blockquote></div><hr class="mt-4"/><footer></footer></article><nav class="flex flex-wrap justify-between mb-10"><a class="text-lg font-bold" href="/post/geometric-progression-and-compounding-of-returns">←<!-- --> <!-- -->Geometric Progression and the Compounding of the Returns</a><a class="text-lg font-bold" href="/post/higher-moments-of-a-distribution">Higher Moments of a Distribution<!-- --> <!-- -->→</a></nav><div shortname="investingsnippets" config="[object Object]" id="disqus_thread"></div></div><div class="w-full lg:w-1/3 px-2"><div class="border border-dotted mt-4 visible lg:invisible lg:mt-0"></div><div class="my-4 lg:mt-0"><content><h5 class="font-semibold text-lg uppercase text-gray-700">About<!-- --> <!-- -->InvestingSnippets</h5><div class="flex-auto flex-no-wrap flex-shrink-0 text-center pt-5"><a href="https://twitter.com/investingsnipts" class="inline-block hover:text-blue-700 no-label px-2" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="25px"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a href="https://github.com/investingsnippets" class="inline-block hover:text-blue-700 no-label px-2" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" width="25px"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="https://www.linkedin.com/in/investingsnippets/" class="inline-block hover:text-blue-700 no-label px-2" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="25px"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></div><div class="flex items-center my-5"><p class="text-base leading-7">Driven by my passion to always dive deep in new knowledge, I started this blog as an attempt to give my own simplified view on how I apply my software engineering skills and background in Mathematics to Investing! NO financial advice or consulting is provided! I use python and try to automate as much as possible.</p></div><div class="flex"><a href="https://twitter.com/investingsnipts" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false"> </a></div></content></div><div class="border border-dotted"></div><div class="my-2 lg:my-4"><content><h5 class="font-semibold text-lg uppercase text-gray-700 mb-2"> Topics </h5><ul><li class="p-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300"><a class="flex items-center text-gray-600 cursor-pointer" href="/topic/mathematics"><span>Mathematics</span><span class="text-gray-500 ml-auto">4<!-- --> <!-- -->articles</span><i class="text-gray-500 bx bx-right-arrow-alt ml-1"></i></a></li><li class="p-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300"><a class="flex items-center text-gray-600 cursor-pointer" href="/topic/investing"><span>Investing</span><span class="text-gray-500 ml-auto">1<!-- --> <!-- -->articles</span><i class="text-gray-500 bx bx-right-arrow-alt ml-1"></i></a></li><li class="p-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300"><a class="flex items-center text-gray-600 cursor-pointer" href="/topic/automation"><span>Automation</span><span class="text-gray-500 ml-auto">1<!-- --> <!-- -->articles</span><i class="text-gray-500 bx bx-right-arrow-alt ml-1"></i></a></li></ul></content></div><div class="border border-dotted"></div><div class="my-2 lg:my-4"><content><h5 class="font-semibold text-lg uppercase text-gray-700 mb-2"> Popular Tags </h5><ul><li class="p-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300"><a class="flex items-center text-gray-600 cursor-pointer" href="/tag/python"><div class="filter-orange-700 h-4 w-4 mr-3 inline-block"><img class="lazyload blur-up" alt="python" data-srcset="https://www.investingsnippets.com/static/python.svg"/></div><span>python</span><span class="text-gray-500 ml-auto">4<!-- --> <!-- -->articles</span><i class="text-gray-500 bx bx-right-arrow-alt ml-1"></i></a></li><li class="p-1 py-4 border-b border-t border-white hover:border-gray-200 transition duration-300"><a class="flex items-center text-gray-600 cursor-pointer" href="/tag/statistics"><div class="filter-orange-700 h-4 w-4 mr-3 inline-block"><img class="lazyload blur-up" alt="statistics" data-srcset="https://www.investingsnippets.com/static/statistics.svg"/></div><span>statistics</span><span class="text-gray-500 ml-auto">3<!-- --> <!-- -->articles</span><i class="text-gray-500 bx bx-right-arrow-alt ml-1"></i></a></li></ul></content></div><div class="border border-dotted"></div><div class="my-2 lg:my-4"><content><h5 class="font-semibold text-lg uppercase text-gray-700 mb-2"> Subscribe </h5><p class="text-gray-600">Receive the next blog article directly to your email!</p><form action="https://tinyletter.com/[object Object]" method="post" target="popupwindow"><input type="email" name="email" id="tlemail" title="Email" required="" placeholder="your email address" class="text-gray-700 bg-gray-100 rounded-t hover:outline-none p-2 w-full mt-4 border outline-none"/><input type="hidden" value="1" name="embed"/><button type="submit" class="px-4 py-2 bg-orange-700 text-gray-200 rounded-b w-full capitalize tracking-wide">Subscribe</button></form><p class="text-gray-600 pt-2 text-xs text-center">or, follow the<!-- --> <a href="/feed.xml" class="inline-block hover:text-blue-700 no-label px-2" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="10px"><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg></a></p></content></div><div class="border border-dotted invisible lg:visible"></div></div></main><footer class="border-t py-12 px-2"><div class="flex pb-4"><div class="flex-auto"><h6><a class="font-semibold text-gray-700 mb-4 no-underline" href="/">Home</a></h6></div><div class="flex-auto"><h6><a class="font-semibold text-gray-700 mb-4 no-underline" href="/terms/general-terms">Terms</a></h6></div></div><div class="text-sm my-2 leading-4 text-gray-600">The content, opinions and conclusions on this website are NOT to be construed as financial advice. I always recommend contacting a licensed independent financial advisor. InvestingSnippets assumes no responsibility for any losses, costs or other consequences that may arise from actions or measures taken based on the content of the website. Investing in financial instruments, securities and mutual funds always involves a risk. The instruments can both increase and decrease in value, also as a result of changes in the exchange rate. It is not certain that you will get back the invested capital. Historical returns are no guarantee of future returns.</div><div class="my-2 text-sm text-gray-600">Copyright ©<!-- --> <!-- -->2020<!-- -->,<!-- --> <!-- -->InvestingSnippets</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"frontmatter":{"title":"Load Google Drive folder in Google Colab","description":"How to mount a Google Drive in Google Colab and load some stock data.","date":"December 7, 2020","topic":{"id":"automation","name":"Automation","image":"automation.jpg","description":"Spending time to do the same thing over and over again is tedious! Thus, I like to automate as much as possible.","color":"bg-green-300"},"tags":[{"id":"python","name":"python","image":"python-header.png","description":"Python is very handy in investing","color":"bg-green-300","icon":"python.svg"}],"author":{"id":"chris","name":"Chris","image":"https://s.gravatar.com/avatar/db809ecfa64d56da4bd9704c8393005a?s=80","description":"Software Engineer, passionate about ..."},"img":"/static/google-colab.png"},"post":{"content":"\nThere are several cases where:\n\n* fetching stock prices is not possible through python libraries like `yahoofinancials` or other APIs\n* you want to load the same data over and over again (for parallelization)\n* you want to use you python modules without publishing them to a registry\n\nIn these cases I find it very handy to store my data (csv format) and my modules in google drive.\n\nHowever, loading the data to Google Colab turned into pain since I had to manually upload the files each time I wanted to run a notebook.\n\nTo avoid this situation I mount google drive and:\n\n1. add the folder with my python modules to the path\n2. copy the data to the Colab data folder\n\n```python\nimport warnings\nwarnings.simplefilter('ignore')\n\n%config InlineBackend.figure_formats=[\"png\"]\n\nfrom google.colab import drive\ndrive.mount('/content/drive', force_remount=True)\n\nimport os\nimport sys\nimport glob\nfrom shutil import copytree, copy\n\n# This will add my python modules in the path\ngdrive_base_path = '/content/drive/My Drive/my-python-modules'\nsys.path.append(gdrive_base_path)\n\ntry:\n  # copy the data we need\n  copytree('/content/drive/My Drive/Colab Notebooks/data', '/content/data')\nexcept Exception as e:\n  pass\n\n%reload_ext autoreload\n%autoreload 2\n%matplotlib inline\n\nimport matplotlib.pyplot as plt\nimport seaborn\nimport pandas as pd\nimport numpy as np\nimport scipy.stats as st\n```\n\nSince the folder that contain my python modules is now in the system path, I'm able to\n\n```python\nimport my_module\n```\n\nand whenever I change my modules (add more functionality, improvements), it practically saves it to Google Drive, since it is a pure mount.\n\nWhen it comes to loading data, then I simply:\n\n```python\nMSFT = pd.read_csv('data/msft_daily.csv', parse_dates=True, index_col=0, header=0)\n```\n\n\u003e **Note**: Since `copytree` is used, uploading new data files to Google Colab, will not automatically save it to Google Drive!\n","excerpt":""},"previousPost":{"slug":"geometric-progression-and-compounding-of-returns","frontmatter":{"title":"Geometric Progression and the Compounding of the Returns","description":"Your savings account offers a 1% annual interest! The account balance in 10 years? +10%? Naaaah","date":"December 6, 2020","topic":{"id":"mathematics","name":"Mathematics","image":"mathematics.png","description":"Investing, as part of the Science of Finance, is subject to the lows of Mathematics!","color":"bg-green-300"},"author":{"id":"chris","name":"Chris","image":"https://s.gravatar.com/avatar/db809ecfa64d56da4bd9704c8393005a?s=80","description":"Software Engineer, passionate about ..."},"img":"/static/fractal-star.png","tags":[]},"excerpt":"","content":"\n## Compounding of Returns\n\nLet us consider the following scenario. A stock asset yields an average monthly return R of 2% for the last 12 months. If we had invested 100$ on this asset a year ago, what would be the outcome of this investment today?\n\nConsider the initial asset price $P_0 = 100$. After the first month of the investment the outcome would be:\n\n$$\nP_1 = 100 + (100 * 0.02) = (100 * 1) + (100 * 0.02) = 100 * (1 + 0.02) = P_0 * 1.02\n$$\n\nThe outcome after the 2nd month would be:\n\n$$\nP_2 = P_1 + (P_1 * 0.02) = P_1 * 1.02\n$$\n\n3rd month:\n\n$$\nP_3 = P_2 + (P_2 * 0.02) = P_2 * 1.02\n$$\n\n(ν-1)th month:\n\n$$\nP_{ν-1} = P_{ν-2} + (P_{ν-2} * 0.02) = P_{ν-2} * 1.02\n$$\n\nνth month:\n\n$$\nP_ν = P_{ν-1} + (P_{ν-1} * 0.02) = P_{ν-1} * 1.02\n$$\n\nIt becomes obvious from the above that generating each element in the sequence $P_0, P_1, ..., P_{ν-1}, P_ν$ follows a pattern where the present number is generated by multiplying the previous number with a constant.\n\nIn our case, the constant is the average monthly return + 1. If we combine the previous equations in an attempt to formulate a final equation that provides the νth based on the $P_0$ element then:\n\n$$\nP_ν = P_{ν-1} * 1.02 = (P_{ν-2} * 1.02) * 1.02 = P_{ν-2} * 1.02^2 = .... = P_0 * (1 + 0.02)^ν\n$$\n\nSo, after 12 months we will have $100 * 1.02^12 = 126.82$!\n\nThe generic equation is:\n\n$$\nP_ν = P_0 * (1 + R_ν)^ν \\qquad (1)\n$$\n\n## Geometric Progression\n\nIn calculus, a sequence of numbers where each term after the first is found by multiplying the previous one by a fixed, non-one number, called `geometric progression`. The fixed number is called, the `common ratio`.\n\nSome interesting properties to notice:\n\n* a common ratio greater than 1, will produce exponential growth towards positive infinity!\n* a common ratio greater than 0 and up to 1, will produce exponential decay towards zero!\n\nIn the example above the way we used the return to calculate the end result is called **Compounding of Returns**.\n\n## From annual to periodic returns\n\nLet's see the example above from another angle. Let's say that an assets had a total return over the last year of 10%. What was the average monthly return of the asset?\n\nWe calculate a simple/arithmetic return (pandas.pct_change) like:\n\n$$\nR_i = \\frac{P_i-P_{i-1}}{P_{i-1}} = \\frac{P_i}{P_{i-1}} - 1 \\qquad (2)\n$$\n\nwhere $P_i$ is the price of the asset on the period $i$.\n\nBy assuming (for simplicity) that $P_0 = 1$ and from (2), $P_1 = P_0 * (1 + R_{annual})$\n\nThen from (1),\n\n$$\n1 + R_{annual} = 1 * (1 + R_{month})^12 =\u003e R_{month} = \\sqrt[12]{1+R_{annual}} - 1 (3)\n$$\n\nWe use ν = 12, because 1 year = 12 months (=\u003e 12 compounding periods). If instead of monthly returns we were asked to find quarter returns then we would use ν = 4 ($R_{quarter} = \\sqrt[4]{1+R_{annual}} - 1$).\n\nFinally, from (3),\n\n$$\nR_{monthly} = \\sqrt[12]{1 + 0.1} - 1 = \\sqrt[12]{1.1} - 1 = 1.0079 - 1 = 0.0079\n$$\n\n## Compounding variable returns\n\nIt is commonly accepted that returns do not stay the same over periods. For example, the average return of this month is not the same as the one from last month! However, the same principle of compounding applies in this case too. Let's see an example.\n\nAn asset yields the following return for the past couple of months $0.021, 0.032, -0.018, 0.06, -0.043, 0.048$. The total return is the **product** of the individual returns when 1 is added to them:\n\n$$\nR = (1 + 0.021) * (1 + 0.032) * (1 - 0.018) * (1 + 0.06) * (1 - 0.043) * (1 + 0.048) = ...\n$$\n\nThis, resonates with the equation (1) above where for a fixed return we have $R_{total} = (1 + R_{fixed})^{number-of-periods}$"},"nextPost":{"slug":"higher-moments-of-a-distribution","frontmatter":{"title":"Higher Moments of a Distribution","description":"See how higher moments can reveal more characteristics of a data series.","date":"December 17, 2020","topic":{"id":"mathematics","name":"Mathematics","image":"mathematics.png","description":"Investing, as part of the Science of Finance, is subject to the lows of Mathematics!","color":"bg-green-300"},"tags":[{"id":"python","name":"python","image":"python-header.png","description":"Python is very handy in investing","color":"bg-green-300","icon":"python.svg"},{"id":"statistics","name":"statistics","image":"statistics.jpg","description":"Statistics is the discipline that concerns the collection, organization, analysis, interpretation and presentation of data. - Wikipedia","color":"bg-green-300","icon":"statistics.svg"}],"author":{"id":"chris","name":"Chris","image":"https://s.gravatar.com/avatar/db809ecfa64d56da4bd9704c8393005a?s=80","description":"Software Engineer, passionate about ..."},"img":"/static/skewness-kurtosis.png","colab":"https://colab.research.google.com/drive/1k2Ek0o9UpV2f7NcS0R6aZ36UDvR24BRP?usp=sharing"},"excerpt":"","content":"\nWe have already discussed about the [mean](/post/measures-of-location) and the [variance](/post/measures-of-variability) of a series of data. \n\nMean is also called the 1st moment and variance the 2nd moment. The type to get a moment (the movement) about a non-random value c, of a density function is:\n\n$$\nE[(X-c)^κ] = \\int_{-\\infty}^{+\\infty} (x-c)^k f(x) dx  \\qquad (1)\n$$\n\nBefore explaining the moments, we should first understand what a density function is. Commonly called probability density function (PDF).\n\n## Density Function\n\n30 people are gathered in a house party. Let us measure their weights:\n\n\n```\nimport pandas as pd\nm_v = [56.8, 81.3, 47.9, 32.5, 24.1, 25.3, 14.3, 29.4, 71.3, 86.0, 54.2, 15.2,\n       54.7, 25.1, 49.5, 1.9, 70.0, 69.6, 75.4, 38.9, 49.2, 22.5, 68.6, 60.1,\n       52.7, 109.7, 38.9, 45.9, 47.7, 52.9]\nvalues = pd.Series(m_v)\nvalues.describe()\n```\n\n    count     30.000000\n    mean      49.053333\n    std       24.001634\n    min        1.900000\n    25%       30.175000\n    50%       49.350000\n    75%       66.475000\n    max      109.700000\n    dtype: float64\n\n\n\nWhat if we change the way we present the data, and instead of having them in a simple series, we try to split them up into buckets.\n\nWe will get the, so called, histogram of the values. It shows how the probabilities of measurement are distributed.\n\n\n```\nimport matplotlib.pyplot as plt\nhistogram = values.plot.hist(bins=10, figsize=(10,5))\nplt.show()\n```\n  \n![png](higher-moments-of-a-distribution/higher-moments-of-a-distribution_3_0.png)\n    \n\n\nIf we ask the question: What is the probability, the next person that joins the party, weights between 80 and 90 kilos?\n\nTo answer this question, we need to imagine as if the upper boundaries of the blue colored space above, are a continuous line, a curve. This curve is what we call PDF or density function.\n\n\n```\nfrom scipy.stats import norm\nimport numpy as np\nx = np.linspace(min(values), max(values))\nax = values.plot(kind='hist', bins=10, figsize=(10,5), density=True)\npdf_fitted = norm.pdf(x, *norm.fit(values))\npd.Series(pdf_fitted, x).plot(ax=ax)\nplt.show()\n```\n    \n![png](higher-moments-of-a-distribution/higher-moments-of-a-distribution_5_0.png)\n\nWe observe that the curve is not a perfect fit. It is an approximation and there are hundreds of different curves we can plot and several of them will be very close to fitting the data (I will show that in another post).\n\nIn this case above, I have intentionally picked the data as such to resemble the, so called, `normal` distribution.\n\nBack to our question now! The probability, the next person that joins the party, weights between 80 and 90 kilos, can be estimated by measuring the area below the curve for that bucket. So, if the whole area below the curve is 1 (zero moment, see below), the part that belongs to bucket 80-90 is a percentage :) and that is the probability we are after. The expression is:\n\n$$\nP( \\text{weight between 80 and 90 kilos} | \\text{mean=x and standard-deviation=y} )\n$$\n\nWhich is translated to: The probability a person weights between 80 and 90 kilos given an average of x and standard-deviation of y.\n\nAnd the area below the curve is the integral between the points:\n\n$$\nP = \\int_{x=80}^{x=90} f(x)dx \\text{  where f the density function}\n$$ \n\nThere are many pros in trying to use distributions to represent how the values in a dataset are distributed:\n\n* makes it easy to measure the areas below (with integrals, since the function of the curve is known)\n* the presentation is much better for the human\n* well known distributions have really nice properties\n\n## Zero Moment (Total Mass)\n\nThat means that in (1), k=0 and as such $(...)^0 = 1$. That leaves us with:\n\n$$\n\\int_{x=-\\infty}^{x=\\infty} f(x)dx = 1 \\qquad (2)\n$$\n\n\u003e Probability Distributions are normalized quantities, that always sum to one. Think of that as the probability that at least one of the events in a sample space will occur. Isn't that 100%?\n\n## 1st Moment - Mean\n\n$$\nμ_1 = E[(X-0)^1] = E[X] = \\int_{-\\infty}^{+\\infty} xf(x)dx  \\qquad (3)\n$$\n\nc=0 in this case since we do not have an origin to get the moment (movement) about.\n\nFrom (3) is obvious that we talk about the mean and that alternatively talk about the balance of the total mass (the area below the curve) around a point :)\n\n## 2nd Moment - Variance\n\nFrom (1), we can take c=0 and k=2! But what will that show us? How the mass is balanced around again the same point, which in practice is the average again but squared? Doesn't provide much value in understanding our data.\n\nFor that reason we get $c=μ$ and that will start making sense, since we se how the mass is diverging from the mean. It will show the variance of the data around the mean :)\n\n$$\nVar = \\int_{-\\infty}^{+\\infty} (x-μ_x)^2f(x)dx  \\qquad (4)\n$$\n\n## 3rd Moment - Skewness\n\nFollowing the pattern above and using k=3 around the mean $c=μ$ then we get the skewness which measures the relative size of the two tails of a distribution.\n\n\n```\nfrom scipy.stats import skew\nskew(values, bias=False) # bias=False calculates the skewness and kurtosis of the sample as opposed to the population.\n```\n    0.274192939649461\n\n\nA left-skewed (negatively-skewed) distribution has a long left tail. That’s because there is a long tail in the negative direction on the number line. The mean is also to the left of the peak.\n\nA right-skewed (positive-skew) distribution has a long right tail. That’s because there is a long tail in the positive direction on the number line. The mean is also to the right of the peak.\n\n![png](higher-moments-of-a-distribution/Relationship_between_mean_and_median_under_different_skewness.png)\n\n## 4th Moment - Kurtosis\n\nThe fourth central moment is a measure of the heaviness of the tail of the distribution.\n\n```\nfrom scipy.stats import kurtosis\nkurtosis(values, bias=False)\n```\n    0.14330737818315065\n\n![jpg](higher-moments-of-a-distribution/kurtosis-types.jpg)\n\n## Higher Moments of the Normal Distribution\n\n```\ndata = np.random.normal(0, 1, 10000000)\nplt.hist(data, bins='auto')\n\nprint(\"mean : \", np.mean(data))\nprint(\"var  : \", np.var(data))\nprint(\"skew : \", skew(data, bias=False))\nprint(\"kurt : \", kurtosis(data, bias=False, fisher=False))\n```\n\n    mean :  -0.00015674618345404924\n    var  :  1.0002202373014222\n    skew :  0.0007495220785926886\n    kurt :  3.0013415645199695\n \n![png](higher-moments-of-a-distribution/higher-moments-of-a-distribution_12_1.png)\n    \n\nFor a normal distribution the skeweness is zero and the kurtosis is 3. These properties are specific to the normal distribution and are used for normality testing of distributions. We will go deeper in that in a later post.\n"}},"tags":[{"id":"python","name":"python","image":"python-header.png","description":"Python is very handy in investing","color":"bg-green-300","icon":"python.svg","slug":"python","count":4},{"id":"statistics","name":"statistics","image":"statistics.jpg","description":"Statistics is the discipline that concerns the collection, organization, analysis, interpretation and presentation of data. - Wikipedia","color":"bg-green-300","icon":"statistics.svg","slug":"statistics","count":3}],"sortedTopics":[{"id":"mathematics","name":"Mathematics","image":"mathematics.png","description":"Investing, as part of the Science of Finance, is subject to the lows of Mathematics!","color":"bg-green-300","slug":"mathematics","count":4},{"id":"investing","name":"Investing","image":"investing.png","description":"The piggy bank digests a good amount of the savings! There is only one way to get away ... investing. BUT, there is a hidden enemy, Speculation!","color":"bg-green-300","slug":"investing","count":1},{"id":"automation","name":"Automation","image":"automation.jpg","description":"Spending time to do the same thing over and over again is tedious! Thus, I like to automate as much as possible.","color":"bg-green-300","slug":"automation","count":1}],"allTopics":[{"id":"mathematics","name":"Mathematics","image":"mathematics.png","description":"Investing, as part of the Science of Finance, is subject to the lows of Mathematics!","color":"bg-green-300"},{"id":"automation","name":"Automation","image":"automation.jpg","description":"Spending time to do the same thing over and over again is tedious! Thus, I like to automate as much as possible.","color":"bg-green-300"},{"id":"investing","name":"Investing","image":"investing.png","description":"The piggy bank digests a good amount of the savings! There is only one way to get away ... investing. BUT, there is a hidden enemy, Speculation!","color":"bg-green-300"}],"slug":"load-google-drive-folder-in-google-colab"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"load-google-drive-folder-in-google-colab"},"buildId":"MojM4Sf8oUWb-jWGgctv7","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-6d6446214035a37ee7d9.js"></script><script src="/_next/static/chunks/main-9b805fa25f3c727dff23.js" async=""></script><script src="/_next/static/chunks/webpack-eb080e3f091731f228fb.js" async=""></script><script src="/_next/static/chunks/framework.1d36bc031662b4dc4c28.js" async=""></script><script src="/_next/static/chunks/bb1c34bc.d6f2610c02ca1f2f8023.js" async=""></script><script src="/_next/static/chunks/commons.8953387921da877f7077.js" async=""></script><script src="/_next/static/chunks/c993a675fc23e2c5b16b0cdfa51e09fd2f5f8f80.2c3b0eedf2090930e584.js" async=""></script><script src="/_next/static/chunks/pages/_app-8d389892d8851416e9e3.js" async=""></script><script src="/_next/static/chunks/cb1608f2.374587486deb2a784e19.js" async=""></script><script src="/_next/static/chunks/a9a7754c.d9f31489d713bac24f81.js" async=""></script><script src="/_next/static/chunks/071290cb.0007511c5b3a58747892.js" async=""></script><script src="/_next/static/chunks/28b78d933298d505941537c6c1190f6a19d63af1.41b7ccb1b9a7b85862b6.js" async=""></script><script src="/_next/static/chunks/f485e41bcb118a628b46c21556cf62824a9a6265.1a408615a795a37f5f29.js" async=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-9717ed5a4d3fad8e5789.js" async=""></script><script src="/_next/static/MojM4Sf8oUWb-jWGgctv7/_buildManifest.js" async=""></script><script src="/_next/static/MojM4Sf8oUWb-jWGgctv7/_ssgManifest.js" async=""></script></body></html>